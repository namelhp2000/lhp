@{
    ViewBag.Title = "Edit";
}
@model RoadFlow.Model.FlowApiSystem
<form method="post">
    @Html.AntiForgeryToken()
    <br />
    <input type="hidden" name="id" value="@Model.Id" />
    <table cellpadding="0" cellspacing="1" border="0" width="99%" class="formtable">
        <tr>
            <th style="width: 80px;">系统名称：</th>
            <td>
                <input type="text" name="Name" id="Name" value="@Model.Name" class="mytext" validate="empty" style="width: 75%" />
            </td>
        </tr>
        <tr>
            <th style="width: 80px;">系统标识：</th>
            <td>
                <input type="text" name="SystemCode" id="SystemCode" value="@Model.SystemCode" validate="empty,ajax" validate_url="CheckCode?id=@Model.Id" class="mytext" style="width: 75%" />
            </td>
        </tr>
        <tr>
            <th style="width: 80px;">调用IP：</th>
            <td>
                <input type="text" name="SystemIP" id="SystemIP" validate="empty" value="@Model.SystemIP" class="mytext" style="width: 75%" />
            </td>
        </tr>
        <tr>
            <th>系统说明：</th>
            <td>
                <textarea class="mytext" id="Note" name="Note" rows="1" cols="1" style="width:90%; height:50px;">@Html.Raw(Model.Note)</textarea>
            </td>
        </tr>
        <tr>
            <th>排序：</th>
            <td>
                <input type="text" name="Sort" id="Sort" class="mytext" value="@Model.Sort" />
            </td>
        </tr>
    </table>
    <div class="buttondiv">
        <input type="button" value="确定保存" class="mybutton" onclick="checkform(this);" />
        <input type="button" class="mybutton" value="取消关闭" style="margin-left: 5px;" onclick="new RoadUI.Window().close();" />
    </div>
</form>
<script type="text/javascript">
    $(window).load(function () {

    });
    function checkform(but) {
        var f = document.forms[0];
        if (new RoadUI.Validate().validateForm(f)) {
            var o = RoadUI.Core.serializeForm($(f));
            $(but).prop("disabled", true);
            $.ajax({
                url: "Save"+"@Html.Raw(ViewBag.queryString)", data: o, type: "post", success: function (text) {
                    if (RoadUI.Core.checkLogin(text)) {
                        alert(text);
                    }
                    $(but).prop("disabled", false);
                    new RoadUI.Window().reloadOpener();
                    new RoadUI.Window().close();
                }
            });
        }
    }
</script>
